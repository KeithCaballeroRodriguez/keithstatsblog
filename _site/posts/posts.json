[
  {
    "path": "posts/2022-03-28-notas-de-muestreo/",
    "title": "Notas de Muestreo",
    "description": "Anotaciones de Muestreo",
    "author": [
      {
        "name": "Keith Caballero",
        "url": "https://keithstatsblog.netlify.app/"
      }
    ],
    "date": "2022-03-28",
    "categories": [
      "sampling"
    ],
    "contents": "\r\nIntroducción\r\nConsiderando la distribución de muestreo de un estimador: \\(\\overline{y}_c\\): Valores posibles del estimador \\(P_c\\) : Probabilidad de materialización del estimador c\r\nLa media de la distribución de muestreo es el valor esperado(la esperanza matemática) del estimador:\r\n\\[\\displaystyle E(\\overline{y})= \\sum_{c}{P_c\\overline{y}_c}\\]\r\n\\(\\displaystyle E(\\overline{y})-\\overline{Y}\\) : Sesgo de muestreo\r\nConsiderando si el estimador es insesgado, sucedería lo sgte para toda la distribución muestral del estimador: Si \\[\\displaystyle E(\\overline{y})-\\overline{Y}=0 \\rightarrow E(\\overline{y})= \\overline{Y}\\]\r\nDesviación Estandar (Error Estándar): La raíz cuadrada de la varianza de la distribución de muestreo del estimador, que también es la desviación cuadrática media alrededor de la media \\(E(\\overline{y})\\) :\r\n\\[\r\n\\displaystyle Var(\\overline{y}) =  \\sum_{c}{P_c[y_c-E(\\overline{y})]^2} \\quad S(\\overline{y})=\\sqrt{Var(\\overline{y}})\r\n\\]\r\nError Cuadrático Medio de la distribución de muestreo se relaciona con la varianza, pero en este las desviaciones se toman alrededor del valor \\(\\overline{Y}\\)\r\n\\[\r\n\\displaystyle ECM(\\overline{y})=\\sum_{c}{P_c(\\overline{y}_c-\\overline{Y})^2}=Var(\\overline{y})+[E(\\overline{y})-\\overline{Y}]^2\r\n\\]\r\nEL termino adicional \\([E(\\overline{y})-\\overline{Y}]^2\\) es el cuadrado del sesgo de muestreo, este se anula en los diseños de muestreo insesgados. Y si no es cero, el sesgo de muestreo es pequeño para la mayoría de las muestras bien diseñadas, y tiende a disminuir conforme aumenta el tamaño de la muestra.\r\nLa inferencia estadística se base a errores estándares de la forma de intervalos:\r\n\\[\r\n[\\overline{y} \\pm t_ps(\\overline{y})]\r\n\\]\r\nEn el Muestreo Probabilistico cada elemento dela población tiene una probabilidad conocida y no nula de ser seleccionada.\r\nClasificación de métodos probabilisticos de selección, estas pueden combinarse\r\nI\r\nMesip (Métodos de Selección con Igual Probabilidad) para todos los elementos:\r\na) Probabilidades iguales en todas las etapas\r\nb) Probabilidades totales iguales para todos los elementos, obtenidas compensando probabilidades desiguales en diversas etapas\r\nProbabilidades desiguales para elementos diferentes; compensadas generalmente con ponderaciones inversas.\r\na) Causadas por irregularidades en los marcos y los procedimientos de selección\r\nb) Afijación o Asignación desproporcional diseñada para una asignación óptima\r\nII\r\nMuestreo de elementos: en una sola etapa, la unidad de muestreo contiene solamente un elemento\r\nMuestreo de conglomerados: las unidades de muestreo son conglomerados de elementos\r\na) Muestreo de conglomerados en una etapa\r\nb) Submuestreo o muestreo polietápico\r\nc) Conglomerados iguales\r\nd) Conglomerados desiguales\r\nIII\r\nSelección no estratificada: las unidades de muestreo seleccionadas de la población completa\r\nMuestreo estratificado: selecciones separadas de particiones,característica o estratos de la población.\r\nIV\r\nSelección aleatoria de unidades individuales de muestreo de estrato completo o de la población\r\nSelección sistemática de unidades de muestreo con un intervalo de selección aplicado a una lista\r\nV\r\nMuestreo en una fase o etapa (monoetápica): La muestra final seleccionada directamente de la población completa\r\nMuestreo de dos fases (muestreo doble) : la muestra final seleccionada de una muestra de primera fase, que obtiene información para estratificación o para estimación\r\nNotación\r\n\r\nSupongamos que nuestra Población esta dada por las siguientes unidades o elementos(personas, viviendas, areas, departamentos,etc): \\(U_1,\\quad U_2,\\quad ...,\\quad U_N\\) donde:\r\nValores de la población\r\n\\(N=\\)número de elementos en la población\r\n\\(Y_i =\\)valor de la variable y para el elemento i-ésimo de la población. Tambien se utiliza para denotar la variable \\(y\\) como elemento general\r\n\\(\\displaystyle Y= \\sum_{i=1}^{N}Y_i =\\) total de la población para la variable \\(y\\). El subíndice i indica el número de listado del elemento de la población. El signo \\(\\displaystyle \\sum_{i=1}^{N}\\) indica la suma sobre todos los elementos de la población (i=1,2,….,N).\r\n\\(\\displaystyle \\overline{Y}=\\frac{Y}{N}=\\frac{1}{N} \\sum_{i=1}^{N}Y_i =\\) media de la población por elementos de la variable \\(Y_i\\)\r\n\\[\\displaystyle S_y^2=\\frac{1}{N-1}\\sum_{i=1}^{N}{(Y_i-\\overline{Y})^2} \\quad \\sigma_2^2=\\frac{1}{N}\\sum_{i=1}^{N}{(Y_i-\\overline{Y})^2} \\rightarrow S_y^2=\\frac{N}{N-1}\\sigma_y^2\\]\r\nLa varianza de los elementos de la población tiene dos definiciones \\(\\sigma_y^2\\) es más tradicional pero \\(S_y^2\\) simplifica muchas fórmulas. La diferencia entre las dos desaparece para poblaciones grandes.\r\n\\(S_y\\) o \\(\\sigma_y =\\) desviación estándar de los elementos de la población.\r\nValores de la muestra\r\n\\(y_i=\\) Valor de la variable \\(Y_i\\) para el elemnto j-ésimo de la muestra.\r\n\\(y=\\sum_{j=1}^{n}y_j =\\) Total de la muestra para la variable \\(Y_i\\)\r\n\\(\\displaystyle \\overline{y}=\\frac{y}{n}=\\frac{1}{n} \\sum_{j=1}^{n}y_i =\\) Media simple de la muestra por elemento de la variable \\(Y_i\\). El índice \\(j\\) aplicable a la muestra varía de 1 a \\(n\\). El signo \\(\\sum_{j=1}^{n}\\) indica la suma sobre todos los elementos de la muestra (j=1,2,…,n)\r\nEn muchos diseños de muestreo mesip, pero no en todos, se usa \\(\\overline{y}\\) para estimar \\(\\overline{Y}\\). En forma semejante, \\(N\\overline{y}\\) puede usarse como estimador de \\(\\overline{Y}\\). Nótese que \\(N\\overline{y}=\\frac{N}{n}y=\\frac{y}{f}\\)\r\n\\(\\displaystyle S_y^2=\\frac{1}{n-1}\\sum_{i=1}^{n}{(y_i-\\overline{y})^2}=\\) varianza de los elementos de la muestra. Es más fácil de calcular en la forma \\(\\displaystyle \\frac{1}{n-1} [ \\sum_{j=1}^ny_j^2-n\\overline{y}^2]\\).\r\nMuestreo Aleatorio Simple (MAS)\r\nMuestreo Con Reemplazo - No Restricto (c.r)\r\n\\(P(\\text{Seleccionar }U_i)=\\frac{1}{N}\\)\r\nMuestreo Sin Reemplazo - Irrestricto (s.r)\r\n\\(P(\\text{Seleccionar }U_i\\text{ en el }1^{er}\\text{ sorteo})=\\frac{1}{N}\\)\r\n\\(P(\\text{Seleccionar }U_i \\wedge U_j \\text{ sean seleccionados})=\\frac{1}{N}\\frac{1}{N-1}=P(U_j)P(U_i\\mid U_j)\\)\r\nPor el Teorema de la Probabilidad Total:\r\nSean los sucesos \\(A_1,A_2,\\ldots,A_n\\) una partición del espacio muestral \\(\\Omega\\), y sea \\(B\\) un suceso cualquiera, se cumple que la probabilidad del suceso \\(B\\) puede expresase en función de los sucesos \\(A_i\\) de la sgte manera: \\[P(B)=P(B \\mid A_1)\\cdot P(A_1) + P(B \\mid A_2)\\cdot P(A_2) + \\cdots +P(B \\mid A_n)\\cdot P(A_n)\\]\r\n\\(P(\\text{Seleccionar }U_i\\text{ en el }2^{do}\\text{ sorteo})=\\)\r\n\\(=P(U_1\\cap U_j\\cup U_2\\cap U_j \\cup \\ldots \\cup U_N\\cap U_j)\\)\r\n\\(=P(U_1\\cap U_j)+ P(U_2\\cap U_j)+ \\ldots + P(U_N\\cap U_j)\\) \\(=P( U_j)P(U_1 \\mid U_j)+ P( U_j)P(U_2 \\mid U_j)+ \\ldots + P( U_j)P(U_N \\mid U_j)\\)\r\ndonde \\(\\ldots \\rightarrow P( U_j)P(U_j \\mid U_j)\\rightarrow P(U_j \\mid U_j)=0\\)\r\n\\(\\displaystyle =\\frac{1}{N}\\frac{1}{N-1}+\\ldots+\\frac{1}{N}\\frac{1}{N-1},\\quad N-1 \\quad veces\\) \\(\\displaystyle =\\sum_{i=1}^NP(U_j)P(U_i\\mid U_j)\\) \\(\\displaystyle =\\sum_{i=1}^N\\frac{1}{N}\\frac{1}{N-1}=(N-1)\\frac{1}{N}\\frac{1}{N-1}=\\frac{1}{N}\\) Por lo tanto: \\(\\displaystyle P(\\text{Seleccionar }U_i\\text{ en el }2^{do}\\text{ sorteo})=\\frac{1}{N}\\)\r\n\\(\\displaystyle P(\\text{Seleccionar }U_i\\text{ en el }3^{er}\\text{ sorteo})=\\frac{1}{N}\\)\r\n\\(\\displaystyle P(\\text{Selección S produsca la }U_i \\mid\\text{ Una selección previa ha producido la } U_j, i\\neq j)= \\frac{1}{N-1}\\)\r\n\\(\\displaystyle P(\\text{Selección R y S seleccione }U_i \\text{ y } U_j) = P(U_i)P(U_j\\mid U_i)+ P(U_j)P(U_i\\mid U_j)=\\)\r\n\\(\\displaystyle =\\frac{1}{N}\\frac{1}{N-1}+\\frac{1}{N}\\frac{1}{N-1}=\\frac{2}{N(N-1)}\\)\r\n\\(P(U_i\\text{ sea seleccionada de una muestra de tamaño n})=\\frac{n}{N}\\)\r\n\\(P(U_i \\wedge U_j \\text{ sean seleccionadas de una muestra de tamaño n})=P(U_j)P(U_i\\mid U_j)=\\frac{n}{N}\\frac{n-1}{N-1}\\)\r\n\\(P(\\text{ Seleccionar n elementos de la población N})=\\frac{1}{\\binom{N}{n}}\\)\r\nEstimadores de\r\nDes Raj\r\nLeslie Kish\r\nSharon Lohr\r\nMedia\r\n\\(\\displaystyle{\\hat{\\overline{Y}}=\\overline{y}=\\frac{1}{n}S_{i=1}^{n}y_i}\\)\r\n\\(\\displaystyle{\\overline{y}_0=\\frac{1}{n}\\sum_{j=1}^{n}y_j}\\)\r\n\\(\\displaystyle{\\hat{\\overline{Y}}=\\overline{y}=\\frac{1}{n}S_{i=1}^{n}y_i}\\)\r\nVarianza del estimador de la Media\r\n\\(\\displaystyle{\\hat{V}(\\overline{y})=(1-f)\\frac{s^2}{n}}\\)\r\n\\(s^{2}=\\frac{S_{j=1}^{n}(y_j-\\overline{y})^2}{n-1}\\)\r\n\\(f=\\frac{n}{N}\\)\r\n\\(\\displaystyle{var(\\overline{y}_0)=(1-f)\\frac{s^2}{n}}\\)\r\n\\(s^2=\\frac{\\sum_{j=1}^{n}(y_j-\\overline{y})^2}{n-1}\\)\r\n\\(\\displaystyle{\\hat{V}(\\overline{y})=(1-f)\\frac{s^2}{n}}\\)\r\n\\(s^{2}=\\frac{1}{n-1}\\sum_{j=1}^{n}(y_j-\\overline{y})^2\\)\r\nError Estándar del estimador de la media\r\n\\(s_{\\overline{y}}=\\sqrt{\\hat{V}(\\overline{y})}\\)\r\n\\(s(\\overline{y})=\\sqrt{var(\\overline{y}_0)}\\)\r\n\\(se(\\overline{y})=\\sqrt{\\hat{V}(\\overline{y})}\\)\r\nError Relativo o Coeficiente de Variación del estimador de la media\r\n\\(\\hat{CV}(\\overline{y})=\\frac{\\sqrt{\\hat{V}(\\overline{y})}}{\\overline{y}}\\)\r\n\\(cv(\\overline{y})=\\frac{s(\\overline{y})}{\\overline{y}}\\)\r\n\\(\\hat{CV}(\\overline{y})=\\frac{se(\\overline{y})}{\\overline{y}}\\)\r\nTotal\r\n\\(\\hat{Y}=N\\overline{y}\\)\r\n\\(\\hat{Y}=N\\overline{y}\\)\r\n\\(\\hat{t}=N\\overline{y}\\)\r\nVarianza del estimador del Total\r\n\\(\\displaystyle{\\hat{V}(\\hat{Y})=N^2(1-f)\\frac{s^2}{n}}\\)\r\n\\(\\displaystyle{\\hat{V}(\\hat{Y})=N^2(1-f)\\frac{s^2}{n}}\\)\r\n\\(\\displaystyle{\\hat{V}(\\hat{t})=N^2(1-f)\\frac{s^2}{n}}\\)\r\nProporción \\(Y_i=1,0\\)\r\n\\(\\hat{p}=\\overline{y}\\)\r\n\\(\\hat{p}=\\overline{y}\\)\r\n\\(\\hat{p}=\\overline{y}\\)\r\nVarianza del estimador de la Proporción\r\n\\(\\displaystyle{\\hat{V}(\\hat{p})=(1-f)\\frac{\\hat{p}(1-\\hat{p})}{n-1}}\\) \\(=(1-f)\\frac{\\hat{p}\\hat{q}}{n-1}\\)\r\n\\(\\approx\\)\r\n\\(\\approx\\)\r\n\r\n\r\n\r\n",
    "preview": "posts/2022-03-28-notas-de-muestreo/notas-de-muestreo_insertimage_1.png",
    "last_modified": "2022-03-29T23:47:54-05:00",
    "input_file": "notas-de-muestreo.knit.md",
    "preview_width": 678,
    "preview_height": 411
  },
  {
    "path": "posts/2022-03-05-web-scraping-pen-bloomberg/",
    "title": "Web Scraping API USD a PEN - Bloomberg",
    "description": "Escrapeamos APIs de Bloomber para ver cambio de monedas de Dólares a Soles",
    "author": [
      {
        "name": "Keith Caballero",
        "url": "https://keithstatsblog.netlify.app/"
      }
    ],
    "date": "2022-03-05",
    "categories": [
      "scraping"
    ],
    "contents": "\r\nScrapeo de APIs de Bloomberg\r\nImportamos Librerias\r\n\r\n\r\nShow code\r\n\r\npacman::p_load(\r\n  rvest,httr,jsonlite,tidyverse,lubridate,plotly\r\n)\r\n\r\n\r\n\r\nCreamos función ya que read_json nos genero errores de lectura\r\n\r\n\r\nShow code\r\n\r\nread_url <- function(url){\r\n  GET(url,\r\n      config = add_headers(.headers = c(\r\n        \"User-Agent\" = \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.93 Safari/537.36\"\r\n      ))\r\n  ) %>% content()\r\n  \r\n}\r\n\r\n\r\n\r\nAPIs scrapeados\r\n\r\n\r\nShow code\r\n\r\napi <- \"https://www.bloomberg.com/markets2/api/history/USDPEN%3ACUR/PX_LAST?\"\r\napi_semanal <- paste0(api,\"timeframe=5_YEAR&period=weekly&volumePeriod=weekly\")\r\napi_diario <- paste0(api,\"timeframe=5_YEAR&period=daily&volumePeriod=daily\")\r\n\r\n\r\n\r\nGeneramos los gráficos\r\nUSD A PEN Semanalmente\r\n\r\n\r\nShow code\r\n\r\n(read_url(api_semanal) %>% \r\n  map_df(\"price\") %>% \r\n  transmute(`DOL a PEN`=value,Fechas = ymd(dateTime)) %>% \r\n  ggplot(aes(Fechas,`DOL a PEN`)) +\r\n  geom_line(size=0.6,alpha=0.7))\r\n\r\n\r\n\r\n\r\nUSD A PEN Diario\r\n\r\n\r\nShow code\r\n\r\n(read_url(api_diario) %>% \r\n    map_df(\"price\") %>% \r\n    transmute(`DOL a PEN`=value,Fechas = ymd(dateTime)) %>% \r\n    ggplot(aes(Fechas,`DOL a PEN`)) +\r\n    geom_line(size=0.6,alpha=0.7)) \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
    "preview": "posts/2022-03-05-web-scraping-pen-bloomberg/web-scraping-pen-bloomberg_files/figure-html5/unnamed-chunk-4-1.png",
    "last_modified": "2022-03-06T00:19:06-05:00",
    "input_file": {},
    "preview_width": 1248,
    "preview_height": 768
  }
]
